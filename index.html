<!DOCTYPE html>
<html>
<head>
  <title>Expiry Reminder - TEXNET HOME FIBER</title>
  <meta charset="UTF-8">
  <style>
    body {
      background-color: #c9f7c2;
      color: #000;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 50px;
      font-size: 18px;
    }
    .container {
      border: 2px solid #2d862d;
      padding: 30px;
      max-width: 700px;
      margin: auto;
      border-radius: 12px;
      background-color: #ecffe6;
    }
    .highlight {
      font-weight: bold;
      font-size: 20px;
      color: #145214;
    }
    footer {
      margin-top: 40px;
      font-size: 16px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Dear Client,</h2>
    <p>This is a friendly reminder that your internet service is <strong>almost expired</strong>.</p>
    <p>It will expire on <span class="highlight" id="expiry">loading...</span>.</p>
    <p><strong>Please renew on time</strong> to continue enjoying uninterrupted service.</p>
    <p><strong>Payment Details:</strong><br>
       PAYBILL: <strong>222111</strong><br>
       ACCOUNT NUMBER: <strong>162238</strong></p>
    <p>Need help? Contact us at:<br>
       0717893086 or 0703127286</p>
  </div>
  <footer>
    TEXNET HOME FIBER â€“ Fast, Affordable, Reliable
  </footer>

  <script>
    // Parse comment from URL
    const query = new URLSearchParams(window.location.search);
    const comment = query.get('comment') || '';

    // Extract expiry from format like: name=Obadiah Mburu;exp=2025/06/25 20:16;phone=0737250758
    const match = comment.match(/exp=([\d\/]+ [\d:]+)/);
    if (match) {
      const raw = match[1]; // "2025/06/25 20:16"
      const date = new Date(raw.replace(/\//g, '-').replace(' ', 'T'));

      if (!isNaN(date)) {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric',
                          hour: 'numeric', minute: '2-digit', hour12: true };
        const formatted = date.toLocaleString('en-US', options);
        document.getElementById('expiry').textContent = formatted;
      } else {
        document.getElementById('expiry').textContent = 'Invalid date';
      }
    } else {
      document.getElementById('expiry').textContent = 'Missing expiry info';
    }
  </script>
</body>
</html>
